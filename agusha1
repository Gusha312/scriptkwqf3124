-- –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–æ–≥–æ –∫—Ç–æ –û–¢–î–ê–Å–¢ —Ç–æ–∫–µ–Ω—ã
-- –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∏—â–µ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–º—É —Ç—Ä–µ–π–¥

local placeId = 14119723130

if game.PlaceId ~= placeId then
    game:GetService("TeleportService"):Teleport(placeId)
    return
end

print("üîç –ò—â—É –ø–æ–ª—É—á–∞—Ç–µ–ª—è...")

-- –ò—â–µ–º –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ –∫—Ä–æ–º–µ —Å–µ–±—è
local function findReceiver()
    while wait(1) do
        for _, player in pairs(game.Players:GetPlayers()) do
            if player.Name ~= game.Players.LocalPlayer.Name then
                -- –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ç–æ—Ä–≥–æ–≤–ª—é
                local args = {"SendRequest", player}
                game:GetService("Players").LocalPlayer:WaitForChild("Remotes"):WaitForChild("TradeRequestRemote"):FireServer(unpack(args))
                
                print("üì® –û—Ç–ø—Ä–∞–≤–ª–µ–Ω –∑–∞–ø—Ä–æ—Å –∏–≥—Ä–æ–∫—É: " .. player.Name)
                
                -- –ñ–¥–µ–º –æ—Ç–≤–µ—Ç–∞ 3 —Å–µ–∫—É–Ω–¥—ã
                wait(3)
                
                -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–∫—Ä—ã–ª–æ—Å—å –ª–∏ –æ–∫–Ω–æ —Ç–æ—Ä–≥–æ–≤–ª–∏
                local tradeGui = game.Players.LocalPlayer.PlayerGui:FindFirstChild("TradeGui")
                if tradeGui and tradeGui.Enabled then
                    print("‚úÖ –ü–æ–ª—É—á–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω: " .. player.Name)
                    return player.Name
                end
            end
        end
    end
end

-- –ü–æ–ª—É—á–∞–µ–º –∏–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è
local receiverName = findReceiver()

-- –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–∫–µ–Ω—ã –≤ —Ç—Ä–µ–π–¥
local function addTokens()
    local player = game.Players.LocalPlayer
    
    local tokens = {
        {ItemType = "Currency", Name = "Tikits", Amount = 0.999999},
        {ItemType = "Tokens", Name = "GalaxyExplorerGachaToken", Amount = 0.999999},
        {ItemType = "Tokens", Name = "MutateExplorerGachaToken", Amount = 0.999999},
        {ItemType = "Tokens", Name = "ExplorerGachaToken", Amount = 0.999999},
        {ItemType = "Tokens", Name = "MonsterExplorerGachaToken", Amount = 0.999999},
        {ItemType = "Tokens", Name = "SweetExplorerGachaToken", Amount = 0.999999},
        {ItemType = "Tokens", Name = "RandomStoredCreatureToken", Amount = 0.999999}
    }
    
    for _, token in ipairs(tokens) do
        local args = {
            "AddTradeItem",
            {
                Overwrite = true,
                ItemType = token.ItemType,
                Name = token.Name,
                Amount = token.Amount
            }
        }
        
        local remoteName = receiverName .. "-" .. player.Name .. "TradeRemote"
        local remote = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):FindFirstChild(remoteName)
        
        if remote then
            remote:InvokeServer(unpack(args))
            print("‚ûï –î–æ–±–∞–≤–ª–µ–Ω: " .. token.Name)
            wait(1)
        end
    end
    
    print("‚úÖ –í—Å–µ —Ç–æ–∫–µ–Ω—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã!")
end

-- –ñ–¥–µ–º –ø–æ–∫–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –ø—Ä–∏–º–µ—Ç —Ç—Ä–µ–π–¥
local function waitForAccept()
    while wait(0.5) do
        local tradeGui = game.Players.LocalPlayer.PlayerGui:FindFirstChild("TradeGui")
        if not tradeGui or not tradeGui.Enabled then
            print("‚úÖ –¢—Ä–µ–π–¥ –∑–∞–≤–µ—Ä—à–µ–Ω!")
            break
        end
    end
end

-- –ó–∞–ø—É—Å–∫–∞–µ–º
addTokens()
waitForAccept()

print("üéØ –ì–æ—Ç–æ–≤–æ! –¢–æ–∫–µ–Ω—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–≥—Ä–æ–∫—É: " .. receiverName)