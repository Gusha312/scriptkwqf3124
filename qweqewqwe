local player = game:GetService("Players").LocalPlayer
local uis = game:GetService("UserInputService")
local ts = game:GetService("TweenService")
local running = false
local totalCoins = 0
local startTime = 0
local minimized = false
local dragging = false
local dragStartPos, frameStartPos

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏
local settings = {
    delayBetweenCycles = 10,
    iterationsPerCycle = 5000,
    repeatsPerCoin = 25
}

-- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã—Ö —Ç–æ–Ω–∞—Ö
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AutoFarmGUI"
screenGui.Parent = player.PlayerGui

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 400, 0, 280) -- –£–≤–µ–ª–∏—á–∏–ª —Ä–∞–∑–º–µ—Ä
mainFrame.Position = UDim2.new(0, 10, 0, 10)
mainFrame.BackgroundColor3 = Color3.fromRGB(60, 30, 80)
mainFrame.BorderSizePixel = 0
mainFrame.ClipsDescendants = true
mainFrame.Parent = screenGui

-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∫–Ω–æ–ø–∫–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ dragging)
local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1, 0, 0, 35) -- –£–≤–µ–ª–∏—á–∏–ª –≤—ã—Å–æ—Ç—É
titleBar.Position = UDim2.new(0, 0, 0, 0)
titleBar.BackgroundColor3 = Color3.fromRGB(80, 40, 100)
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

local titleText = Instance.new("TextLabel")
titleText.Size = UDim2.new(0.6, 0, 1, 0)
titleText.Position = UDim2.new(0, 10, 0, 0)
titleText.BackgroundTransparency = 1
titleText.Text = "‚ú® –ê–≤—Ç–æ-–§–∞—Ä–º –ú–æ–Ω–µ—Ç"
titleText.TextColor3 = Color3.fromRGB(255, 255, 255)
titleText.TextXAlignment = Enum.TextXAlignment.Left
titleText.Font = Enum.Font.GothamBold
titleText.TextSize = 16 -- –£–≤–µ–ª–∏—á–∏–ª —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞
titleText.Parent = titleBar

local minimizeButton = Instance.new("TextButton")
minimizeButton.Size = UDim2.new(0, 35, 0, 35) -- –£–≤–µ–ª–∏—á–∏–ª —Ä–∞–∑–º–µ—Ä
minimizeButton.Position = UDim2.new(1, -70, 0, 0)
minimizeButton.BackgroundColor3 = Color3.fromRGB(120, 60, 150)
minimizeButton.Text = "_"
minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeButton.TextSize = 18 -- –£–≤–µ–ª–∏—á–∏–ª —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞
minimizeButton.Font = Enum.Font.GothamBold
minimizeButton.Parent = titleBar

local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 35, 0, 35) -- –£–≤–µ–ª–∏—á–∏–ª —Ä–∞–∑–º–µ—Ä
closeButton.Position = UDim2.new(1, -35, 0, 0)
closeButton.BackgroundColor3 = Color3.fromRGB(180, 60, 100)
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.TextSize = 16 -- –£–≤–µ–ª–∏—á–∏–ª —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞
closeButton.Font = Enum.Font.GothamBold
closeButton.Parent = titleBar

-- –ö–æ–Ω—Ç–µ–Ω—Ç
local contentFrame = Instance.new("Frame")
contentFrame.Size = UDim2.new(1, 0, 1, -35)
contentFrame.Position = UDim2.new(0, 0, 0, 35)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = mainFrame

-- –ö–Ω–æ–ø–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0.9, 0, 0, 45) -- –£–≤–µ–ª–∏—á–∏–ª –≤—ã—Å–æ—Ç—É
toggleButton.Position = UDim2.new(0.05, 0, 0, 10)
toggleButton.BackgroundColor3 = Color3.fromRGB(180, 80, 220)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Text = "‚ñ∂ –í–ö–õ–Æ–ß–ò–¢–¨ (P)"
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextSize = 16 -- –£–≤–µ–ª–∏—á–∏–ª —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞
toggleButton.Parent = contentFrame

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
local statsLabel = Instance.new("TextLabel")
statsLabel.Size = UDim2.new(0.9, 0, 0, 100) -- –£–≤–µ–ª–∏—á–∏–ª –≤—ã—Å–æ—Ç—É
statsLabel.Position = UDim2.new(0.05, 0, 0, 65)
statsLabel.BackgroundTransparency = 1
statsLabel.Text = "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n–°—Ç–∞—Ç—É—Å: ‚ùå –≤—ã–∫–ª—é—á–µ–Ω–æ\nüí∞ –ú–æ–Ω–µ—Ç: 0\n‚è± –í—Ä–µ–º—è: 00:00:00\n‚ö° –ú–æ–Ω–µ—Ç/—á–∞—Å: 0"
statsLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
statsLabel.TextXAlignment = Enum.TextXAlignment.Left
statsLabel.Font = Enum.Font.Gotham
statsLabel.TextSize = 14 -- –£–≤–µ–ª–∏—á–∏–ª —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞
statsLabel.TextYAlignment = Enum.TextYAlignment.Top
statsLabel.Parent = contentFrame

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–π–º–∏–Ω–≥–æ–≤
local settingsFrame = Instance.new("Frame")
settingsFrame.Size = UDim2.new(0.9, 0, 0, 90) -- –£–≤–µ–ª–∏—á–∏–ª –≤—ã—Å–æ—Ç—É
settingsFrame.Position = UDim2.new(0.05, 0, 0, 175)
settingsFrame.BackgroundColor3 = Color3.fromRGB(70, 35, 90)
settingsFrame.BorderSizePixel = 0
settingsFrame.Parent = contentFrame

local settingsTitle = Instance.new("TextLabel")
settingsTitle.Size = UDim2.new(1, 0, 0, 25)
settingsTitle.BackgroundTransparency = 1
settingsTitle.Text = "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–π–º–∏–Ω–≥–æ–≤:"
settingsTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
settingsTitle.TextXAlignment = Enum.TextXAlignment.Left
settingsTitle.Font = Enum.Font.Gotham
settingsTitle.TextSize = 14 -- –£–≤–µ–ª–∏—á–∏–ª —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞
settingsTitle.Parent = settingsFrame

local delayInput = Instance.new("TextBox")
delayInput.Size = UDim2.new(0.45, 0, 0, 30) -- –£–≤–µ–ª–∏—á–∏–ª –≤—ã—Å–æ—Ç—É
delayInput.Position = UDim2.new(0, 0, 0, 30)
delayInput.BackgroundColor3 = Color3.fromRGB(50, 25, 65)
delayInput.TextColor3 = Color3.fromRGB(255, 255, 255)
delayInput.Text = tostring(settings.delayBetweenCycles)
delayInput.PlaceholderText = "–ó–∞–¥–µ—Ä–∂–∫–∞ (—Å–µ–∫)"
delayInput.Font = Enum.Font.Gotham
delayInput.TextSize = 14 -- –£–≤–µ–ª–∏—á–∏–ª —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞
delayInput.Parent = settingsFrame

local iterationsInput = Instance.new("TextBox")
iterationsInput.Size = UDim2.new(0.45, 0, 0, 30) -- –£–≤–µ–ª–∏—á–∏–ª –≤—ã—Å–æ—Ç—É
iterationsInput.Position = UDim2.new(0.5, 5, 0, 30)
iterationsInput.BackgroundColor3 = Color3.fromRGB(50, 25, 65)
iterationsInput.TextColor3 = Color3.fromRGB(255, 255, 255)
iterationsInput.Text = tostring(settings.iterationsPerCycle)
iterationsInput.PlaceholderText = "–ò—Ç–µ—Ä–∞—Ü–∏–π –∑–∞ —Ü–∏–∫–ª"
iterationsInput.Font = Enum.Font.Gotham
iterationsInput.TextSize = 14 -- –£–≤–µ–ª–∏—á–∏–ª —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞
iterationsInput.Parent = settingsFrame

-- –£–∑–æ—Ä (–¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç)
local pattern = Instance.new("Frame")
pattern.Size = UDim2.new(1, 0, 0, 6)
pattern.Position = UDim2.new(0, 0, 1, -6)
pattern.BackgroundColor3 = Color3.fromRGB(150, 70, 200)
pattern.BorderSizePixel = 0
pattern.Parent = mainFrame

local pattern2 = Instance.new("Frame")
pattern2.Size = UDim2.new(0, 6, 1, -35)
pattern2.Position = UDim2.new(1, -6, 0, 35)
pattern2.BackgroundColor3 = Color3.fromRGB(150, 70, 200)
pattern2.BorderSizePixel = 0
pattern2.Parent = mainFrame

-- –§—É–Ω–∫—Ü–∏–∏
local function toggleMinimize()
    minimized = not minimized
    
    if minimized then
        mainFrame.Size = UDim2.new(0, 400, 0, 35)
        minimizeButton.Text = "‚ñ°"
    else
        mainFrame.Size = UDim2.new(0, 400, 0, 280)
        minimizeButton.Text = "_"
    end
end

local function closeGUI()
    screenGui:Destroy()
end

local function updateStats()
    if not statsLabel then return end
    
    local elapsedTime = running and (os.time() - startTime) or 0
    local hours = math.floor(elapsedTime / 3600)
    local minutes = math.floor((elapsedTime % 3600) / 60)
    local seconds = elapsedTime % 60
    
    local timeString = string.format("%02d:%02d:%02d", hours, minutes, seconds)
    local coinsPerHour = elapsedTime > 0 and math.floor((totalCoins / elapsedTime) * 3600) or 0
    
    statsLabel.Text = string.format(
        "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n–°—Ç–∞—Ç—É—Å: %s\nüí∞ –ú–æ–Ω–µ—Ç: %d\n‚è± –í—Ä–µ–º—è: %s\n‚ö° –ú–æ–Ω–µ—Ç/—á–∞—Å: %d",
        running and "‚úÖ –≤–∫–ª—é—á–µ–Ω–æ" or "‚ùå –≤—ã–∫–ª—é—á–µ–Ω–æ",
        totalCoins,
        timeString,
        coinsPerHour
    )
end

local function toggleAutoFarm()
    running = not running
    
    if running then
        toggleButton.BackgroundColor3 = Color3.fromRGB(220, 100, 100)
        toggleButton.Text = "‚èπ –í–´–ö–õ–Æ–ß–ò–¢–¨ (P)"
        startTime = os.time()
        
        -- –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
        settings.delayBetweenCycles = tonumber(delayInput.Text) or 10
        settings.iterationsPerCycle = tonumber(iterationsInput.Text) or 5000
    else
        toggleButton.BackgroundColor3 = Color3.fromRGB(180, 80, 220)
        toggleButton.Text = "‚ñ∂ –í–ö–õ–Æ–ß–ò–¢–¨ (P)"
    end
    
    updateStats()
end

-- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –æ–∫–Ω–∞
local function startDrag()
    dragging = true
    dragStartPos = uis:GetMouseLocation()
    frameStartPos = mainFrame.Position
end

local function endDrag()
    dragging = false
end

local function updateDrag()
    if dragging then
        local mousePos = uis:GetMouseLocation()
        local delta = mousePos - dragStartPos
        mainFrame.Position = UDim2.new(
            0, frameStartPos.X.Offset + delta.X,
            0, frameStartPos.Y.Offset + delta.Y
        )
    end
end

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
minimizeButton.MouseButton1Click:Connect(toggleMinimize)
closeButton.MouseButton1Click:Connect(closeGUI)
toggleButton.MouseButton1Click:Connect(toggleAutoFarm)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –æ–∫–Ω–∞
titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        startDrag()
    end
end)

titleBar.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        endDrag()
    end
end)

uis.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        updateDrag()
    end
end)

uis.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.KeyCode == Enum.KeyCode.P then
        toggleAutoFarm()
    end
end)

-- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Ñ–∞—Ä–º–∞
spawn(function()
    while true do
        wait(0.1)
        
        if running then
            local coinsThisCycle = 0
            
            for i = 1, settings.iterationsPerCycle do
                if not running then break end
                
                local args = {
                    [1] = "SellGachaAsync",
                    [2] = {
                        [1] = "Momola",
                        [2] = 0.5
                    }
                }
                
                player:WaitForChild("RemoteEvent"):FireServer(unpack(args))
                
                -- –°—á–∏—Ç–∞–µ–º –º–æ–Ω–µ—Ç—ã (1 –º–æ–Ω–µ—Ç–∞ –∑–∞ –∫–∞–∂–¥—ã–µ 25 –ø–æ–≤—Ç–æ—Ä–æ–≤)
                if i % settings.repeatsPerCoin == 0 then
                    totalCoins = totalCoins + 1
                    coinsThisCycle = coinsThisCycle + 1
                end
                
                -- –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∂–¥—ã–µ 100 –∏—Ç–µ—Ä–∞—Ü–∏–π
                if i % 100 == 0 then
                    updateStats()
                    wait()
                end
            end
            
            updateStats()
            
            if running then
                -- –ñ–¥–µ–º –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —Ü–∏–∫–ª–æ–º
                for waitTime = settings.delayBetweenCycles, 1, -1 do
                    if not running then break end
                    toggleButton.Text = "‚èπ –ü–∞—É–∑–∞ (" .. waitTime .. "s)"
                    wait(1)
                end
                
                if running then
                    toggleButton.Text = "‚èπ –í–´–ö–õ–Æ–ß–ò–¢–¨ (P)"
                end
            end
        else
            wait(1)
        end
    end
end)

-- –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
mainFrame.Size = UDim2.new(0, 400, 0, 35)
wait(0.5)
mainFrame.Size = UDim2.new(0, 400, 0, 280)

print("‚ú® –ê–≤—Ç–æ-—Ñ–∞—Ä–º –∑–∞–≥—Ä—É–∂–µ–Ω! –ù–∞–∂–º–∏—Ç–µ P –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è")
print("üí° –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –æ–∫–Ω–æ, –∑–∞–∂–∞–≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫")
